(this.webpackJsonparXived=this.webpackJsonparXived||[]).push([[0],{18:function(e,t,a){e.exports={entry:"entry_entry__1jr6A"}},19:function(e,t,a){e.exports=a(57)},24:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(10),i=a.n(l),c=(a(24),a(6)),o=a.n(c),s=a(11),u=a(4),m=a(12),p=a(14),d=a(17),h=a(18),g=a.n(h),f=function(e){return n.a.createElement("div",{className:g.a.entry},n.a.createElement("h2",null," ",n.a.createElement("a",{href:e.data.link}," ",e.data.title)," "),n.a.createElement("p",null,e.data.authors),n.a.createElement("p",null,"Published ",e.data.published),n.a.createElement("p",null,e.data.summary),n.a.createElement("p",null))},y=(a(56),function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],i=Object(r.useState)(""),c=Object(u.a)(i,2),h=c[0],g=c[1],y=Object(r.useState)(""),x=Object(u.a)(y,2),b=x[0],v=x[1],E=Object(r.useState)(""),D=Object(u.a)(E,2),w=D[0],S=D[1],O=Object(r.useState)(""),q=Object(u.a)(O,2),j=q[0],k=q[1],A=Object(r.useState)(!1),C=Object(u.a)(A,2),N=C[0],P=C[1],_=Object(r.useState)({topic:"Machine Learning",limit:"10",startDate:w,endDate:j}),M=Object(u.a)(_,2),T=M[0],I=M[1];Object(r.useEffect)((function(){B()}),[T]);var X=function(e){return new Promise((function(t){return setTimeout(t,e)}))},B=function(){var e=Object(s.a)(o.a.mark((function e(){var t,a,r,n,l,i,c,s,u,m,p,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,fetch('http://export.arxiv.org/api/query?search_query=all:"'.concat(T.topic,'"&sortBy=submittedDate&sortOrder=descending&start=').concat(t,"&max_results=").concat(T.limit));case 3:return a=e.sent,e.next=6,a.text();case 6:if(r=e.sent,!((n=Array.prototype.slice.call((new window.DOMParser).parseFromString(r,"text/xml").querySelectorAll("entry"))).length>0&&T.startDate.trim()&&T.endDate.trim())){e.next=51;break}l=new Date(T.startDate.trim()).getTime(),i=new Date(T.endDate.trim()).getTime(),c=n[n.length-1].querySelector("published").textContent.trim(),s=new Date(c).getTime(),u=[];case 14:if(!(n.length>0&&s>l)){e.next=45;break}return console.log("Scraping from "+new Date(c).toDateString()),t+=n.length,u=n,e.next=20,fetch('http://export.arxiv.org/api/query?search_query=all:"'.concat(T.topic,'"&sortBy=submittedDate&sortOrder=descending&start=').concat(t,"&max_results=").concat(500));case 20:return a=e.sent,e.next=23,a.text();case 23:r=e.sent,n=Array.prototype.slice.call((new window.DOMParser).parseFromString(r,"text/xml").querySelectorAll("entry")),m=0;case 26:if(!(m<5&&0==n.length)){e.next=40;break}return console.log("Request failed, retrying API request "+(m+1)+" times"),e.next=30,fetch('http://export.arxiv.org/api/query?search_query=all:"'.concat(T.topic,'"&sortBy=submittedDate&sortOrder=descending&start=').concat(t,"&max_results=").concat(500));case 30:return a=e.sent,e.next=33,a.text();case 33:return r=e.sent,n=Array.prototype.slice.call((new window.DOMParser).parseFromString(r,"text/xml").querySelectorAll("entry")),m+=1,e.next=38,X(5e3);case 38:e.next=26;break;case 40:return n.length>0&&(c=n[n.length-1].querySelector("published").textContent.trim(),s=new Date(c).getTime()),e.next=43,X(2e3);case 43:e.next=14;break;case 45:for(n=(n=u.concat(n)).reverse(),p=[],d=0;d<n.length&&s<=i;)c=n[d].querySelector("published").textContent.trim(),(s=new Date(c).getTime())>=l&&p.length<T.limit&&p.push(n[d]),d+=1;n=p;case 51:L(n);case 52:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){for(var t=[],a=0;a<e.length;a++){var r={};r.title=e[a].querySelector("title").textContent.trim().replace(/"/g,"'");var n=e[a].querySelector("published").textContent.trim().replace(/"/g,"'");r.published=new Date(n).toDateString();for(var i=e[a].querySelectorAll("author"),c=[],o=0;o<i.length;o++)c.push(i[o].textContent.trim());r.authors=c.join(", ").replace(/"/g,"'"),r.summary=e[a].querySelector("summary").textContent.trim().replace(/"/g,"'"),r.link=e[a].querySelectorAll("link")[1].getAttribute("href").trim().replace(/"/g,"'"),t.push(r)}console.log("Scraped "+t.length+" entries"),l(t),P(!0)};return n.a.createElement("div",{className:"App"},n.a.createElement(p.a,null,n.a.createElement("title",null,"arXived")),n.a.createElement("header",{className:"App-header"},n.a.createElement("h1",{className:"App-title"},"arXived")),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){if(!h.trim())return alert("Please enter a topic"),!1;if(!b.trim()||isNaN(b.trim())||parseInt(b.trim(),10)<=0)return alert("Please enter a valid limit for the number of results (MAX 1000)"),!1;if(w.trim()||j.trim()){if(!j.trim())return alert("Please enter an end date range"),!1;if(!w.trim())return alert("Please enter a start date range"),!1;if("Invalid Date"==new Date(w.trim()))return alert("Please enter a valid start date (Ex: 1/01/2019)"),!1;if("Invalid Date"==new Date(j.trim()))return alert("Please enter a valid end date (Ex: 5/01/2020)"),!1;if(new Date(w.trim()).getTime()>=new Date(j.trim()).getTime())return alert("Make sure the start date range is earlier than the end date range"),!1}return!0}()&&(P(!1),I({topic:h.trim(),limit:Math.min(1e3,parseInt(b.trim(),10)),startDate:w.trim(),endDate:j.trim()})),g(""),v(""),S(""),k("")},className:"input-form"},n.a.createElement("input",{className:"topic-search-bar",type:"text",placeholder:"Enter a topic or author of interest",value:h,onChange:function(e){g(e.target.value)}}),n.a.createElement("input",{className:"limit-input-bar",type:"text",placeholder:"Result Limit (MAX 1000)",value:b,onChange:function(e){v(e.target.value)}}),n.a.createElement("input",{className:"date-input-bar",type:"text",placeholder:"1/01/2020 (Optional Start Date)",value:w,onChange:function(e){S(e.target.value)}}),n.a.createElement("input",{className:"date-input-bar",type:"text",placeholder:"5/01/2020 (Optional End Date)",value:j,onChange:function(e){k(e.target.value)}}),n.a.createElement("button",{className:"submit-button",type:"submit"},"Scrape arXiv")),n.a.createElement("div",{className:"entries"},N?n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h2",null,'Top matches for "',T.topic,'"'),n.a.createElement("p",null,n.a.createElement(d.CSVLink,{data:a,filename:"arxiv_data.csv",target:"_blank"},"Download as CSV")," for all ",a.length," results.")):n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h2",null,"Scraping information..."),n.a.createElement("p",null,"If you chose a date range in the distant past, this may take several minutes..."),n.a.createElement("p",null,"Try recent date ranges or omitting the range altogether for faster, more reliable queries."),n.a.createElement("br",null),n.a.createElement(m.ClipLoader,{size:100,color:"#123abc"}),n.a.createElement("br",null)),N?a.slice(0,Math.min(20,a.length)).map((function(e,t){return n.a.createElement(f,{key:t,data:e})})):null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.5e469926.chunk.js.map